<a href="/admin/reward"><u><< Back to reward management</u></a>

<h3 class="mt-md-2">Create Reward (External Sponsor)</h3>

<p-toast key="toastMsg" [baseZIndex]="100"></p-toast>

<div *ngIf="!isSuccessful">
    <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
        <div class="row">
            <div class="col-6">
                <div class="form-group row">
                    <label for="externalName" class="col-sm-3 col-form-label">External Sponsor</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" name="externalName" [(ngModel)]="form.externalName" required #externalName="ngModel" />
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && externalName.invalid">
                        <div *ngIf="externalName.errors.required">Name of External Sponsor is required</div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="title" class="col-sm-3 col-form-label">Reward Title</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" name="title" [(ngModel)]="form.title" required #title="ngModel" />
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && title.invalid">
                        <div *ngIf="title.errors.required">Title is required</div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="desc" class="col-sm-3 col-form-label">Description</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" name="desc" [(ngModel)]="form.desc" #desc="ngModel" rows="3"></textarea>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="country" class="col-sm-3 col-form-label">Country</label>
                    <div class="col-sm-9">
                        <select class="form-control" name="country" [(ngModel)]="form.country" required #country="ngModel">
                        <option *ngFor="let c of countries" value={{c}}>{{c}}</option>
                        </select>
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && country.invalid">
                        <div *ngIf="country.errors.required">Country is required</div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="file" class="col-sm-3 col-form-label">Image</label>
                    <form class="col-sm-9">
                    <input type="file" name="file" (change)="selectImage($event)" />
                    </form>
                </div>
                
            </div>
            <div class="col-6">
                <div class="form-group row">
                    <label for="point" class="col-sm-3 col-form-label">Point</label>
                    <div class="col-sm-5">
                        <input type="number" class="form-control" name="point" [(ngModel)]="form.point" required min="0"
                            #point="ngModel" />
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && point.invalid">
                        <div *ngIf="point.errors.required">Point is required</div>
                        <div *ngIf="point.errors.min">
                            Point cannot be below 0
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="quota" class="col-sm-3 col-form-label">Quota</label>
                    <div class="col-sm-5">
                        <input type="number" class="form-control" name="quota" [(ngModel)]="form.quota" required min="0"
                            #quota="ngModel" />
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && quota.invalid">
                        <div *ngIf="quota.errors.required">Quota is required</div>
                        <div *ngIf="quota.errors.min">
                            Quota cannot be below 0
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="tier" class="col-sm-3 col-form-label">Tier</label>
                    <div class="col-sm-5">
                        <select class="form-control" name="tier" [(ngModel)]="form.tier" required #tier="ngModel">
                            <option>gold</option>
                            <option>silver</option>
                            <option>bronze</option>
                        </select>
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && tier.invalid">
                        <div *ngIf="tier.errors.required">Tier is required</div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="startDate" class="col-sm-3 col-form-label">Start Date</label>
                    <div class="col-sm-5">
                        <p-calendar [baseZIndex]="90" name="startDate" [(ngModel)]="form.startDate" dateFormat="yy-mm-dd" [showIcon]="true" [minDate]="minimumDate"
                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2020:2025" required #startDate="ngModel"></p-calendar>
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && startDate.invalid">
                        <div *ngIf="startDate.errors.required">Start date is required</div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="endDate" class="col-sm-3 col-form-label">End Date</label>
                    <div class="col-sm-5">
                        <p-calendar [baseZIndex]="90" name="endDate" [(ngModel)]="form.endDate" dateFormat="yy-mm-dd" [showIcon]="true" [minDate]="minimumDate"
                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2020:2025" required #endDate="ngModel"></p-calendar>
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && endDate.invalid">
                        <div *ngIf="endDate.errors.required">End date is required</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="form-group row">
                    <div class="col-12">
                      <input type="checkbox" name="tnc" [(ngModel)]="form.tnc" required #tnc="ngModel">
                      <label for="tnc" class="ml-md-2">I agree</label>
                    </div>
                    <div class="alert-danger" *ngIf="f.submitted && tnc.invalid">
                      <div *ngIf="tnc.errors.required">Please indicate that you have read and agree</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <button type="submit" class="btn btn-primary btn-block col-10">Create</button>
        </div>
    </form>
</div>

<div *ngIf="isSuccessful">
    <div class="alert alert-success">
        Reward created successfully.<br>
        It will be visible in <a href="/reward">Reward Marketplace</a> upon the start date.
    </div>
</div>
